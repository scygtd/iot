(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[34],{"3EXq":function(e,t,a){e.exports={login:"antd-pro-pages-user-login2-index-login",bg1:"antd-pro-pages-user-login2-index-bg1",gyl:"antd-pro-pages-user-login2-index-gyl",gy2:"antd-pro-pages-user-login2-index-gy2",box:"antd-pro-pages-user-login2-index-box",box1:"antd-pro-pages-user-login2-index-box1",header:"antd-pro-pages-user-login2-index-header",item:"antd-pro-pages-user-login2-index-item",userLabel:"antd-pro-pages-user-login2-index-userLabel",remember:"antd-pro-pages-user-login2-index-remember",remember_box:"antd-pro-pages-user-login2-index-remember_box",text:"antd-pro-pages-user-login2-index-text",btn:"antd-pro-pages-user-login2-index-btn",avatar:"antd-pro-pages-user-login2-index-avatar",avatarx:"antd-pro-pages-user-login2-index-avatarx",code:"antd-pro-pages-user-login2-index-code",code_img:"antd-pro-pages-user-login2-index-code_img"}},T7p2:function(e,t,a){"use strict";var n=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a("43Yg")),u=n(a("8aBX")),r=n(a("scpF")),i=n(a("O/V9")),d=a("bG4t"),o=n(a("sy1d")),c=a("/bJj"),s=n(a("Ysru"));function f(e){var t=m();return function(){var a,n=(0,i.default)(e);if(t){var l=(0,i.default)(this).constructor;a=Reflect.construct(n,arguments,l)}else a=n.apply(this,arguments);return(0,r.default)(this,a)}}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var p=function(e){(0,u.default)(a,e);var t=f(a);function a(){var e;return(0,l.default)(this,a),e=t.apply(this,arguments),e.captchaConfig=function(){return(0,d.defer)(function(){return(0,d.from)((0,o.default)("/jetlinks/authorize/captcha/config",{method:"GET",errorHandler:function(){}})).pipe((0,c.map)(function(e){return null===e||void 0===e?void 0:e.result}))})},e.getCaptcha=function(){return(0,d.defer)(function(){return(0,d.from)((0,o.default)("/jetlinks/authorize/captcha/image?width=130&height=40",{method:"GET"})).pipe((0,c.map)(function(e){return e.result}))})},e.queryCurrent=function(){return(0,d.defer)(function(){return(0,d.from)((0,o.default)("/jetlinks/authorize/me",{method:"GET"})).pipe((0,c.map)(function(e){return e}))})},e}return a}(s.default),g=p;t.default=g},vlar:function(e,t,a){"use strict";var n=a("fbTi"),l=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("Gcrx");var u=l(a("Wyac"));a("0UdG");var r=l(a("8gui")),i=l(a("cO38")),d=n(a("xwgP")),o=a("8ur3"),c=l(a("3EXq")),s=l(a("T7p2")),f=a("/ENq"),m=function(e){var t=e.dispatch,a=e.settings,n=e.location.query,l=localStorage.getItem("x-access-token"),o=new s.default(""),m=(0,d.useState)(""),p=(0,i.default)(m,2),g=p[0],v=p[1],b=(0,d.useState)(""),y=(0,i.default)(b,2),h=y[0],x=y[1],E=(0,d.useState)(36e5),N=(0,i.default)(E,2),C=N[0],k=N[1],S=(0,d.useState)(!1),T=(0,i.default)(S,2),w=T[0],_=T[1],P=(0,d.useState)(""),j=(0,i.default)(P,2),G=j[0],I=j[1],L=(0,d.useState)(""),q=(0,i.default)(L,2),O=q[0],B=q[1],R=(0,d.useState)(""),U=(0,i.default)(R,2),z=U[0],H=U[1],J=(0,d.useState)(!1),K=(0,i.default)(J,2),M=K[0],X=K[1],F=(0,d.useState)(!1),Q=(0,i.default)(F,2),Y=Q[0],A=Q[1],W=function(){t({type:"login/login",payload:{username:g,password:h,expires:C,tokenType:"default",verifyKey:G,verifyCode:z,bindCode:null===n||void 0===n?void 0:n.code},callback:function(){Z()}})},Z=function(){M&&o.getCaptcha().subscribe(function(e){I(e.key),B(e.base64)})};(0,d.useEffect)(function(){t&&t({type:"settings/fetchConfig",callback:function(){var e=document.getElementById("sys-title"),t=document.getElementById("title-icon");e&&a.title&&(e.textContent=a.title),t&&a.titleIcon&&(t.href=a.titleIcon),l?o.queryCurrent().subscribe(function(e){200===e.status?A(!0):A(!1),_(!0)}):_(!0)}}),o.captchaConfig().subscribe(function(e){e&&(X(e.enabled),e.enabled&&o.getCaptcha().subscribe(function(e){I(e.key),B(e.base64)}))})},[a.title]);var V=function(){var e=JSON.parse(localStorage.getItem("user-detail")||"{}");return Y?d.default.createElement("div",{className:c.default.login},d.default.createElement("div",{className:c.default.bg1}),d.default.createElement("div",{className:c.default.gyl},"\u7269\u8054\u7f51\u5e73\u53f0",d.default.createElement("div",{className:c.default.gy2},"MQTT TCP CoAP HTTP , \u591a\u6d88\u606f\u534f\u8bae\u9002\u914d , \u53ef\u89c6\u5316\u89c4\u5219\u5f15\u64ce")),d.default.createElement("div",{className:c.default.box},d.default.createElement("div",{className:c.default.box1},d.default.createElement("div",{style:{width:"100%",height:"30px"}}),d.default.createElement("div",{className:c.default.avatar},d.default.createElement(r.default,{size:"small",className:c.default.avatarx,src:e.avatar||"https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=3273016457,3482023254&fm=26&gp=0.jpg",alt:"avatar"})),d.default.createElement("input",{onClick:function(){f.router.replace("/")},className:c.default.btn,type:"button",name:"\u767b\u5f55",value:"\u767b\u5f55"}),d.default.createElement("div",{style:{width:"100%",height:"30px"}}),d.default.createElement("input",{onClick:function(){localStorage.setItem("x-access-token",""),A(!1),"/user/login"!==window.location.pathname?f.router.replace({pathname:"/user/login"}):f.router.push("/user/login")},className:c.default.btn,type:"button",name:"\u5207\u6362\u8d26\u53f7",value:"\u5207\u6362\u8d26\u53f7"}),d.default.createElement("div",{style:{width:"100%",height:"30px"}})))):D()},D=function(){return d.default.createElement("div",{className:c.default.login},d.default.createElement("div",{className:c.default.bg1}),d.default.createElement("div",{className:c.default.gyl},"\u7269\u8054\u7f51\u5e73\u53f0",d.default.createElement("div",{className:c.default.gy2},"MQTT TCP CoAP HTTP , \u591a\u6d88\u606f\u534f\u8bae\u9002\u914d , \u53ef\u89c6\u5316\u89c4\u5219\u5f15\u64ce")),d.default.createElement("div",{className:c.default.box},d.default.createElement("div",{className:c.default.box1},d.default.createElement("div",{className:c.default.header},"\u7528\u6237\u767b\u5f55"),d.default.createElement("div",{className:c.default.item},d.default.createElement("div",{className:c.default.userLabel},"\u7528\u6237\u540d"),d.default.createElement("input",{style:{borderStyle:"none none solid none"},onChange:function(e){return v(e.target.value)},value:g,type:"text"})),d.default.createElement("div",{className:c.default.item,onKeyUp:function(e){13!==e.keyCode||M||W()}},d.default.createElement("div",{className:c.default.userLabel},"\u5bc6",d.default.createElement("span",{style:{marginLeft:"1em"}}),"\u7801"),d.default.createElement("input",{style:{borderStyle:"none none solid none"},onChange:function(e){return x(e.target.value)},value:h,type:"password"})),M?d.default.createElement("div",{className:c.default.item},d.default.createElement("div",{className:c.default.userLabel},"\u9a8c\u8bc1\u7801"),d.default.createElement("input",{onKeyUp:function(e){13===e.keyCode&&W()},style:{borderStyle:"none none solid none"},onChange:function(e){return H(e.target.value)},value:z,type:"text"}),d.default.createElement("div",{className:c.default.code,onClick:function(){Z()}},d.default.createElement("img",{src:O,className:c.default.code_img}))):d.default.createElement("div",null),d.default.createElement("div",{className:c.default.remember},d.default.createElement("div",{className:c.default.remember_box},d.default.createElement("input",{type:"checkbox",checked:-1===C,onChange:function(){k(-1===C?36e5:-1)}}),d.default.createElement("div",{className:c.default.text},"\u8bb0\u4f4f\u6211"))),d.default.createElement("input",{onClick:function(){W()},className:c.default.btn,type:"button",name:"\u767b\u5f55",value:"\u767b\u5f55"}))))};return w?V():d.default.createElement(u.default,{spinning:w})},p=(0,o.connect)(function(e){var t=e.login,a=e.loading,n=e.settings;return{userLogin:t,submitting:a.effects["login/login"],settings:n}})(m);t.default=p}}]);