(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{OtmW:function(e,t,i){"use strict";var a=i("tAuX"),c=i("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(i("gWZ8"));i("miYZ");var n=c(i("tsqr")),o=c(i("qIgq")),u=a(i("q1tI")),d=i("yP6+"),s=c(i("CLrh")),l=i("N8P2"),f=function(e){var t=e.config,i=[],a=(0,u.useState)(i),c=(0,o.default)(a,2),f=c[0],m=c[1],g=(0,u.useState)(300),v=(0,o.default)(g,2),h=v[0],p=v[1];(0,u.useEffect)(function(){var t=document.getElementById(e.id);t&&p(t.offsetHeight-50)},[e.ySize]);var y={sold:{alias:t.x||"\u9500\u552e\u91cf",tickCount:t.history&&t.history>9?Math.ceil(t.history/2):10},genre:{alias:t.y||"\u6e38\u620f\u79cd\u7c7b",type:"cat",range:[1/(t.history-1),1-1/(t.history-1)],tickCount:5}};return(0,u.useEffect)(function(){e.ready&&e.ready(function(){n.default.success("\u66f4\u65b0\u3002\u3002\u3002".concat(e.id))}),e.edit&&e.edit(function(){return e.config}),e.preview&&e.preview(function(){return"https://www.baidu.com/link?url=kuSzeluGn9dkOqcDvPcvU5g1gh-DMms6auTTUACJkdPm559tFM6GRDYkHE7p8fSHDl-RSOc5KeDGQBCictIOZsdgBL5Ds_kDaZCu1qgx99BitlSq6ocOJp3htq0bW7IoATv4Y0I33tKGyQL-bBDOuAqHvqsLeQiWlDuR0KCJiA3u-SswRJhJQHgREuKPOHszUZ0L_9oieMXOwCY0HYUDGsIKBjIMNoV3x6CFP4h63kPC3rmMwKTs-0WtEa1VceLscigtzPQiQmqZqlctYr1JX1IWLbR6r6rNcvQvP2o8NqaHqfzcG0tTiE6y7fSgM9D2N1E9ON8yyBf8iRnPOIzjfc6p2FPMmuM6_Rc6cBFhhPC_ujQWj4kc_CveBLiapyLMDS4E1KVznYHYWSz_OiK-DZIvGqriXnBUCz5j25CgJFm_mMK-LrwLAXkHY_2BzRr4WQFBMoOzesktllvUaOmzlkircgLMGRVKQZRubOzkJ0ocCySDlUKSyNeIX01yGRGGOZ5EEBoPD6BVVUFCKKUUEEp6NEj-6vVN_Jihgk-_W1J--9a9PKRuXKuS0EbKjvySdY3f5ink5eax6jvSvv7GNywDh1E6slJqj8rHTBQO32niX9mPlD9vfLrbOxSUcTBO_GUmwK6K7OIZSCUChT3Lpuwv38Lr8vlFbuUdZIB2tSO1lDLjDshWgPlic54ECPb4TLsGMdlJg8p8q_BLL4Qdly75nte91d1jYcb3EbEbFViLVewOfeOspKTyimZFT-G0Qe15r1klAAZvt7dD5LBqu_Nh89uLs4_ZZ4jhQJKBSLm&timg=&click_t=1587465382772&s_info=1622_978&wd=&eqid=e5c3ddcc00000e74000000065e9ecca5"})},[]),(0,u.useEffect)(function(){var i,a=[],c=e.config.dimension;return"history"===c?a=[{dashboard:"device",object:e.productId,measurement:"temperature",dimension:c,params:{history:t.history,deviceId:e.deviceId}}]:"agg"===c?a=[{dashboard:"device",object:e.productId,measurement:"temperature",dimension:c,params:{limit:e.config.limit,deviceId:e.deviceId,time:e.config.time,agg:e.config.agg,format:e.config.format,from:e.config.from,to:e.config.to}}]:"realTime"===c&&(i=(0,l.getWebsocket)("".concat(e.id,"-").concat(e.productId,"-").concat(e.deviceId,"-").concat(e.config.measurement),"/dashboard/device/".concat(e.productId,"/").concat(e.config.measurement,"/realTime"),{deviceId:e.deviceId,history:e.config.history}).subscribe(function(t){var i=t.payload;f.push({genre:i.timestamp,sold:i.value.value}),f.length>e.config.history&&f.shift(),m((0,r.default)(f))})),"realTime"!==c&&s.default.visualization.getDashboardData(a).then(function(e){if(200===e.status){var t=e.result,i=t.map(function(e){return{genre:e.data.timeString,sold:e.data.value.value}});m(i)}}),function(){return i&&i.unsubscribe()}},[]),u.default.createElement(d.Chart,{height:h,data:f,renderer:"svg",scale:y,forceFit:!0},u.default.createElement(d.Axis,{name:"genre",title:!0,label:{autoRotate:!0,formatter:function(e){return e}}}),u.default.createElement(d.Axis,{name:"sold",title:!0}),u.default.createElement(d.Tooltip,null),u.default.createElement(d.Geom,{type:"interval",position:"genre*sold",color:"genre"}))},m=f;t.default=m}}]);