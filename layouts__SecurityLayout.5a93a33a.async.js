(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"0jlH":function(e,t,n){"use strict";var r=n("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n("cO38")),u=p(n("xwgP")),c=n("8ur3"),i=n("4mPf"),a=n("/ENq"),f=n("XuRK"),l=n("N8P2"),s=n("xKgJ");function d(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=o?Object.getOwnPropertyDescriptor(e,u):null;c&&(c.get||c.set)?Object.defineProperty(r,u,c):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}var g=function(e){var t=e.dispatch,n=e.settings,r=(0,u.useState)(!1),c=(0,o.default)(r,2),d=c[0],p=c[1],g=e.children,w=e.loading,y=!!localStorage.getItem("x-access-token"),v=(0,s.getAccessToken)();(0,f.stringify)({redirect:window.location.href});(0,u.useEffect)(function(){p(!0),t&&("null"!==v?t({type:"user/fetchCurrent"}):a.router.push("/user/login"))},[]),(0,u.useEffect)(function(){t&&t({type:"settings/fetchConfig",callback:function(){document.getElementById("title-icon").href=n.titleIcon,p(!0)}})},[n.title]);var b=function(){return y&&(0,l.initWebSocket)(),!y&&w||!d?u.default.createElement(i.PageLoading,null):y?g:u.default.createElement(a.Redirect,{to:"/user/login"})};return b()},w=(0,c.connect)(function(e){var t=e.user,n=e.settings,r=e.loading;return{currentUser:t.currentUser,settings:n,loading:r.models.user}})(g);t.default=w}}]);