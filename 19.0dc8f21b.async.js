(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{"2pFn":function(e,t,a){"use strict";var n=a("tAuX"),i=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("miYZ");var o=i(a("tsqr")),r=i(a("qIgq")),l=n(a("q1tI")),c=a("yP6+"),u=i(a("CLrh")),d=a("N8P2"),s=c.Guide.Html,f=c.Guide.Arc,m=function(e){var t=e.config,a=[{value:0,formatValue:0}],n=(0,l.useState)(a),i=(0,r.default)(n,2),m=i[0],v=i[1],p={value:{min:t.min||0,max:t.max||10,tickInterval:t.max/10||1,nice:!1}},h=(0,l.useState)(300),g=(0,r.default)(h,2),y=g[0],b=g[1];return(0,l.useEffect)(function(){var t=document.getElementById(e.id);t&&b(t.offsetHeight-50)},[e.ySize]),(0,l.useEffect)(function(){e.ready&&e.ready(function(){o.default.success("\u66f4\u65b0\u3002\u3002\u3002".concat(e.id))}),e.edit&&e.edit(function(){return e.config})},[]),(0,l.useEffect)(function(){var t,a=e.config.dimension;if("history"===a){var n=[{dashboard:"device",object:e.productId,measurement:e.config.measurement,dimension:"history",params:{history:1,deviceId:e.deviceId}}];u.default.visualization.getDashboardData(n).then(function(e){if(200===e.status){var t=e.result,a=t.map(function(e){return{value:e.data.value.value,formatValue:e.data.value.formatValue}});v(a)}})}else t=(0,d.getWebsocket)("".concat(e.id,"-").concat(e.productId,"-").concat(e.deviceId,"-").concat(e.config.measurement),"/dashboard/device/".concat(e.productId,"/").concat(e.config.measurement,"/realTime"),{deviceId:e.deviceId,history:e.config.history}).subscribe(function(e){var t=e.payload;v([{formatValue:t.value.formatValue,value:t.value.value}])});return function(){return t&&t.unsubscribe()}},[]),l.default.createElement(c.Chart,{height:y,data:m,scale:p,padding:"auto",forceFit:!0,placeholder:!0,style:{overflow:"hidden"}},l.default.createElement(c.Coord,{type:"polar",startAngle:-9/8*Math.PI,endAngle:1/8*Math.PI,radius:.75}),l.default.createElement(c.Axis,{name:"value",zIndex:2,line:null,label:{offset:-16,textStyle:{fontSize:18,textAlign:"center",textBaseline:"middle"}},subTickCount:4,subTickLine:{length:-8,stroke:"#fff",strokeOpacity:1},tickLine:{length:-18,stroke:"#fff",strokeOpacity:1}}),l.default.createElement(c.Axis,{name:"1",visible:!1}),l.default.createElement(c.Guide,null,l.default.createElement(f,{zIndex:0,start:[t.min||0,.965],end:[t.max||10,.965],style:{stroke:"#CBCBCB",lineWidth:18}}),l.default.createElement(f,{zIndex:1,start:[0,.965],end:[m[0].value,.965],style:{stroke:"#1890FF",lineWidth:18}}),l.default.createElement(s,{position:["50%","90%"],html:'<div style="width: 300px;text-align: center;font-size: 12px!important;"><p style="font-size: 1.75em; color: rgba(0,0,0,0.43);margin: 0;">'.concat(t.name,'</p><p style="font-size: 3em;color: rgba(0,0,0,0.85);margin: 0;">').concat(m[0].formatValue,"</p></div>")})),l.default.createElement(c.Geom,{type:"point",position:"value*1",shape:"pointer",color:"#1890FF",active:!1,style:{stroke:"#fff",lineWidth:1}}))},v=m;t.default=v}}]);